<html>
    <head>
        <title>Shopping Cart</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="style.css">
        <script>
            function loadXMLDoc(filename) {
                var xhttp = new XMLHttpRequest();
                xhttp.open("GET", filename, false);
                xhttp.send("");
                return xhttp.responseXML;
            }

            function displayResult() {
                var xml = loadXMLDoc("data.xml");
                
                if (xml) {
                    try {
                        var xmlDoc = xml;   
                        console.log(xmlDoc);

                        var orders = xmlDoc.getElementsByTagName("Order");
                        var cartHtml = "<ul>";
                        for (var i = 0; i < orders.length; i++) {
                            cartHtml += "<li>" + 
                                "<h3>" + orders[i].getElementsByTagName("Singer")[0].textContent + "</h3><br>" +
                                orders[i].getElementsByTagName("AlbumName")[0].textContent + "<br>" + 
                                "<image src='" + orders[i].getElementsByTagName("AlbumImageURL")[0].textContent + "' width='300px'>" + "<br>" +
                                "<h3>" + orders[i].getElementsByTagName("AlbumPrice")[0].textContent + "</h3><br>" +
                                "</li>";
                        }
                        cartHtml += "</ul>";

                        document.getElementById("xmllist").innerHTML = cartHtml;

                    } catch (e) {
                        console.error("Error during XSLT processing:", e);
                    }
                } else {
                    // console.error("Failed to load XML.");
                }
            }


            function init() {
                displayResult();
            }

            function viewsrc() {
                alert(document.body.innerHTML);
            }

            function addInstance() {
                
            }

            function deleteInstance() {
                
            }
        </script>
    </head>
    <body onload="init();">
        <header>
            <nav>
                <ul>
                    <li><a href="../xml_viewer/index.html">XML Viewer</a></li>
                    <li><a href="index.html">XML Generator</a></li>
                </ul>
            </nav>
        </header>
        <div id="xslhead"></div>
        <hr>
        <button onclick="addInstance();">新增專輯</button>
        <button onclick="deleteInstance();">刪除專輯</button>
        <button onclick="viewsrc();">檢視原始檔</button>
        <!-- <div id="others">
            <button><a href="ex1.xsl">初評級 (xsl)</a></button>
            <button><a href="ex.xml">輸入資料 (xml)</a></button>
        </div> -->
        <hr>
        <div id="xmllist"></div>
        <footer>
            <p>GitHub <a href="https://github.com/chihyu0917">@chihyu0917</p>
        </footer>
    </body>
</html>
